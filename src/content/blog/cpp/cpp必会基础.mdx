---
title: C++必会基础
publishDate: 2025-03-27
description: 'C++必会基础'
tags:
  - C++
---
import { Aside, Steps } from 'astro-pure/user'
import {Dot} from 'src/user'

## 1. 基础语法

### 1.1. sizeof

- 指针大小永远固定。取决于编译的目标平台的位数。32 位就是 4 字节，64 位就是 8 字节。
- 数组作为函数参数时会退化为指针，大小按指针计算。
- struct 结构体要考虑字节对齐。
- 如果 class 配置了虚函数，则会在头部添加虚函数表。
- 空类会用 1 个字节进行占位。
- 字符串数组要加上末尾的 `\0`。

### 1.2. 数组退化为指针

数组退化：在 C++ 中，数组在作为函数参数时会退化为指向其首元素的指针。

退化的原因是因为数组作为函数参数时，**实际传递的是指向数组首元素的指针**，不可能逐个拷贝整个数组然后在栈上传递，所以编译器只知道参数是一个指针，而不知道它的长度信息。

但是，当数组直接作为 `sizeof` 的参数时，它不会退化，因为 sizeof 是编译器在编译期间计算的结果，这个时候编译器是有信息知道数组的大小。

为了在函数中获取数组的长度，需要将数组的长度作为另一个参数传递给函数，或者使用模板实现。

### 1.3. const

只需要记住 **const 是优先左匹配的**。

**修饰指针或引用**：
```cpp
const int* p = &a;
int const* p = &a;
int* const p = &a;
const int* const p = &a;

const int& a = 1;
int& const a = 1; // x，const cant apply to reference
```

**修饰函数**：
```cpp
const int f() {}
```

**修饰成员函数**：
```cpp
int f() const {}\
```
